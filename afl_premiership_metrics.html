<!DOCTYPE html>

<html lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>AFL Premiership Metrics</title>
<meta name="description" content="AFL Premiership metrics">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&display=swap" rel="stylesheet">

<script src="site_libs/header-attrs-2.26/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link href="site_libs/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-5.2.2/bootstrap.bundle.min.js"></script>
<script src="site_libs/bs3compat-0.4.2/transition.js"></script>
<script src="site_libs/bs3compat-0.4.2/tabs.js"></script>
<script src="site_libs/bs3compat-0.4.2/bs3compat.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/core-js-2.5.3/shim.min.js"></script>
<script src="site_libs/react-17.0.0/react.min.js"></script>
<script src="site_libs/react-17.0.0/react-dom.min.js"></script>
<script src="site_libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="site_libs/reactable-0.4.4/reactable.css" rel="stylesheet" />
<script src="site_libs/reactable-binding-0.4.4/reactable.js"></script>
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/3.0.1/chartjs-plugin-annotation.min.js"></script>
<link rel="icon" href="favicon.ico" />
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="logo_192.png">
<meta name="theme-color" content="#670099">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L04L041MGC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-L04L041MGC');
</script>
<!-- <script type="text/javascript">
  (function (c, l, a, r, i, t, y) {
    c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
    t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
    y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
  })(window, document, "clarity", "script", "ae8a2litjx");
</script> -->

<link rel="stylesheet" href="custom.css" type="text/css" />
<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>





<!-- tabsets -->
<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}
.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}
.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}
.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}
.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}
.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}
.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}
.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->

</head>
<body>
<div class="container-fluid main-container container">

<nav id="nav" class="navbar navbar-expand-sm navbar-default fixed-top" role="navigation">
  <div class="container">
    <a class="navbar-brand" href="index.html"><img id="logo" style="height: 50px; width: 151px;" src="logo.png"
        alt="Wheelo Ratings logo" /></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar"
      aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
          <a href="index.html">Home</a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false">
            ATP Tennis
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">RATINGS</li>
            <li>
              <a href="tennis_atp_ratings.html">Elo Ratings</a>
            </li>
            <li>
              <a href="tennis_atp_race.html">Elo Race</a>
            </li>
            <!-- <li>
              <a href="tennis_atp_ratings_by_year.html">End of year top 200</a>
            </li>
            <li>
              <a href="tennis_atp_ratings_by_year_top5.html">End of year top 5</a>
            </li> -->
            <li class="divider"></li>
            <li class="dropdown-header">STATISTICS</li>
            <li>
              <a href="tennis_atp_stats_last52.html">Player Stats - Last 52 Weeks</a>
            </li>
            <!-- <li class="divider"></li>
            <li class="dropdown-header">HISTORY</li>
            <li>
              <a href="tennis_atp_players.html">Players</a>
            </li>
            <li>
              <a href="tennis_atp_tournaments.html">Tournaments</a>
            </li> -->
            <li class="divider"></li>
            <li class="dropdown-header">RECORDS</li>
            <li>
              <a href="tennis_atp_records.html">Overall Records</a>
            </li>
            <li>
              <a href="tennis_atp_season_records.html">Season Records</a>
            </li>
            <li>
              <a href="tennis_atp_goat.html">Greatest players</a>
            </li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false">
            WTA Tennis
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">RATINGS</li>
            <li>
              <a href="tennis_wta_ratings.html">Elo Ratings</a>
            </li>
            <li>
              <a href="tennis_wta_race.html">Elo Race</a>
            </li>
            <!-- <li>
              <a href="tennis_wta_ratings_by_year.html">End of year top 200</a>
            </li>
            <li>
              <a href="tennis_wta_ratings_by_year_top5.html">End of year top 5</a>
            </li> -->
            <li class="divider"></li>
            <li class="dropdown-header">STATISTICS</li>
            <li>
              <a href="tennis_wta_stats_last52.html">Player Stats - Last 52 Weeks</a>
            </li>
            <!-- <li class="divider"></li>
            <li class="dropdown-header">HISTORY</li>
            <li>
              <a href="tennis_wta_players.html">Players</a>
            </li>
            <li>
              <a href="tennis_wta_tournaments.html">Tournaments</a>
            </li> -->
            <li class="divider"></li>
            <li class="dropdown-header">RECORDS</li>
            <li>
              <a href="tennis_wta_records.html">Overall Records</a>
            </li>
            <li>
              <a href="tennis_wta_season_records.html">Season Records</a>
            </li>
            <li>
              <a href="tennis_wta_goat.html">Greatest players</a>
            </li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false">
            AFL
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a href="afl_index.html">AFL Home</a>
            </li>
            <li>
              <a href="afl_match_previews.html">Match Previews</a>
            </li>
            <li class="divider"></li>
            <li class="dropdown-header">MODEL</li>
            <li>
              <a href="afl_ratings.html">Ratings</a>
            </li>
            <li>
              <a href="afl_tipping.html">Tipping</a>
            </li>
            <li>
              <a href="afl_simulations.html">Simulations</a>
            </li>
            <li class="divider"></li>
            <li class="dropdown-header">STATISTICS</li>
            <li>
              <a href="afl_team_lists.html">Team Lists</a>
            </li>
            <li>
              <a href="afl_match_stats.html">Match Stats</a>
            </li>
            <li>
              <a href="afl_stats.html">Player Stats</a>
            </li>
            <li>
              <a href="afl_stats_team.html">Team Stats</a>
            </li>
            <li>
              <a href="afl_xscores.html">Expected Scores</a>
            </li>
            <li>
              <a href="afl_brownlow.html">Brownlow Medal Predictions</a>
            </li>
            <li class="divider"></li>
            <li class="dropdown-header">RECORDS</li>
            <li>
              <a href="afl_premierships.html">Premierships</a>
            </li>
            <li>
              <a href="afl_annual_summary.html">Team Annual Summary</a>
            </li>
            <li>
              <a href="afl_record_against_finals_teams.html">Record Against Finals Teams</a>
            </li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false">
            NBL
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">MODEL</li>
            <li>
              <a href="nbl_ratings.html">Team Ratings</a>
            </li>
            <li class="divider"></li>
            <li class="dropdown-header">STATISTICS</li>
            <li>
              <a href="nbl_stats.html">Player Stats</a>
            </li>
            <li>
              <a href="nbl_stats_team.html">Team Stats</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="about.html">About</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="https://ko-fi.com/wheeloratings" target="_blank">
            <img id="kofi" style="height: 24px; width: 24px;" src="kofi_144.png" alt="Support me on ko-fi" />
          </a>
        </li>
        <li>
          <a href="https://twitter.com/WheeloRatings" target="_blank">
            <!-- <span class="ion ion-social-twitter"></span> -->
            <svg class="twitter" xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 0 24 24">
              <path
                d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<nav id="navbar-banner">
    <ul class="nav navbar-banner-heading justify-content-center">
        <li class="fw-bold text-center">
            Australian Football League (AFL)
        </li>
    </ul>
    <ul class="nav navbar-banner-nav justify-content-center">
        <li class="nav-item">
            <a class="nav-link" href="afl_index.html">AFL Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_match_previews.html">Match Previews</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_team_lists.html">Team Lists</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_match_stats.html">Match Stats</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_stats.html">Player Stats</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_stats_team.html">Team Stats</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_ratings.html">Team Ratings</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_simulations.html">Simulations</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="afl_brownlow.html">Brownlow</a>
        </li>
    </ul>
</nav>

<header id="header">


<h1 class="title toc-ignore">AFL Premiership Metrics</h1>

</header>


<main>
<script src="./src/afl_premiership_metrics/data.js"></script>
<div id="stats-table">
<div>
<button id="view-window-button" class="btn btn-primary btn-sm mx-1 my-2">
View Premiership Window
</button>
</div>
<script>
const reactableId = "premiership-metrics-table";
const columnDisplay = function (cellInfo) {
  stdValue = cellInfo.values[cellInfo.column.id.concat("_Std")]
  rank = cellInfo.values[cellInfo.column.id.concat("_Rank")]

  //lightness = Math.abs(stdValue) >= 2.0 ? 75 : Math.round(100 - Math.abs(stdValue) / 2.0 * 25, 0);
  lightness = Math.abs(stdValue) >= 2.0 ? 60 : Math.round(100 - Math.abs(stdValue) / 2.0 * 40, 0);
  hue = stdValue > 0 ? 279 : 36;

  if (typeof cellInfo.value === "undefined")
    return ""
  else
    return `<div class="me-1" style="width: 18px; height: 18px; float: left; background-color: hsl(${hue} 80% ${lightness}% );"></div> ${cellInfo.value}`;
}
const columnStyle = function (rowInfo, column, state) {
  value = rowInfo.values[column.id]
  
  lightness = Math.abs(value) >= 2.0 ? 75 : Math.round(100 - Math.abs(value) / 2.0 * 25);
  hue = value > 0 ? 279 : 36;

  if (typeof value === "undefined")
    return ""
  else
    return { fontWeight: 'bold', backgroundColor: `hsl(${hue} 80% ${lightness}% )` }
}
const summaryDisplay = function (cellInfo) {
  if (isNaN(cellInfo.value))
    return ""
  else {
    value_text = Number.parseFloat(Math.abs(cellInfo.value)).toFixed(2);
    value_text = `${cellInfo.value < 0 ? "-" : "+"}${value_text}`
    
    return value_text
  }
}
const teamDisplay = function (cellInfo) {
  return cellInfo.row['Image'] && cellInfo.row['Image'] !== "NA" ? `<img src='${cellInfo.row['Image']}' height='15px' width='15px' alt=''> ${cellInfo.row['Abbreviation']}` : cellInfo.row['Abbreviation']
}
const teamMatchStatsDisplay = function (cellInfo) {
  return cellInfo.value && cellInfo.value !== "NA" ? `<a href='afl_match_stats_team.html?id=${cellInfo.value}&season=${cellInfo.row['Season']}'>View</a>` : ""
}
const columnClass = function(rowInfo, column, state) {
  if (column.id !== 'Team') {
    for (let i = 0; i < state.sorted.length; i++) {
      if (state.sorted[i].id === column.id)
        return 'rt-sorted'
        //return 'fw-bold'
    }
  }
}
</script>
<div>
<button id="show-current" type="button" class="btn btn-primary btm-sm mx-1 my-2">Current Season</button>
<button id="show-premiers" type="button" class="btn btn-light btm-sm mx-1 my-2">Past Premiers</button>
<button id="show-all" type="button" class="btn btn-light btm-sm mx-1 my-2">All Teams</button>
</div>
<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="premiership-metrics-table" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="premiership-metrics-table">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Team":[],"Abbreviation":[],"Image":[],"WebsiteId":[],"Season":[],"IsCurrent":[],"IsPremier":[],"Summary":[],"Summary_Rank":[],"Summary_With":[],"Summary_With_Rank":[],"TotalPoints":[],"ShotsAtGoal":[],"Inside50s_Diff":[],"PointsFromTurnover":[],"ForwardHalf":[],"ChainToScore":[],"D50ToF50":[],"RetentionRating_Diff":[],"TotalPoints_Std":[],"ShotsAtGoal_Std":[],"Inside50s_Diff_Std":[],"PointsFromTurnover_Std":[],"ForwardHalf_Std":[],"ChainToScore_Std":[],"D50ToF50_Std":[],"RetentionRating_Diff_Std":[],"TotalPoints_Rank":[],"ShotsAtGoal_Rank":[],"Inside50s_Diff_Rank":[],"PointsFromTurnover_Rank":[],"ForwardHalf_Rank":[],"ChainToScore_Rank":[],"D50ToF50_Rank":[],"RetentionRating_Diff_Rank":[],"Summary_Without":[],"Summary_Without_Rank":[],"TotalPoints_Opposition":[],"ShotsAtGoal_Opposition":[],"MarksOnLead_Opposition":[],"PointsFromTurnover_Opposition":[],"PostClearanceContestedPossessions_Diff":[],"PointsFromForwardHalf_Opposition":[],"ChainToScore_Opposition":[],"D50ToF50_Opposition":[],"TotalPoints_Opposition_Std":[],"ShotsAtGoal_Opposition_Std":[],"MarksOnLead_Opposition_Std":[],"PointsFromTurnover_Opposition_Std":[],"PostClearanceContestedPossessions_Diff_Std":[],"PointsFromForwardHalf_Opposition_Std":[],"ChainToScore_Opposition_Std":[],"D50ToF50_Opposition_Std":[],"TotalPoints_Opposition_Rank":[],"ShotsAtGoal_Opposition_Rank":[],"MarksOnLead_Opposition_Rank":[],"PointsFromTurnover_Opposition_Rank":[],"PostClearanceContestedPossessions_Diff_Rank":[],"PointsFromForwardHalf_Opposition_Rank":[],"ChainToScore_Opposition_Rank":[],"D50ToF50_Opposition_Rank":[]},"columns":[{"id":"Team","name":"Team","type":"character","show":true,"sortNALast":true,"minWidth":180,"align":"left","className":"columnClass","defaultSortDesc":false},{"id":"Abbreviation","name":"Team","type":"character","show":true,"sortNALast":true,"minWidth":65,"align":"left","className":"sticky","filterable":true,"defaultSortDesc":false,"cell":"function(cellInfo) { return teamDisplay(cellInfo) }","html":true,"headerClassName":"sticky"},{"id":"Image","name":"Image","type":["glue","character"],"show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"WebsiteId","name":"Match Stats","type":"character","show":true,"sortNALast":true,"minWidth":50,"align":"center","className":"columnClass","sortable":false,"cell":"function(cellInfo) { return teamMatchStatsDisplay(cellInfo) }","html":true},{"id":"Season","name":"Year","type":"character","show":true,"sortNALast":true,"minWidth":50,"align":"center","className":"sticky","filterable":true,"style":{"left":65},"headerClassName":"sticky","headerStyle":{"left":65}},{"id":"IsCurrent","name":"IsCurrent","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"IsPremier","name":"IsPremier","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"Summary","name":"Value","type":"numeric","show":true,"sortNALast":true,"minWidth":55,"align":"center","className":"","cell":"function(cellInfo) { return summaryDisplay(cellInfo) }","html":true,"style":"function(rowInfo, column, state) { return columnStyle(rowInfo, column, state) }"},{"id":"Summary_Rank","name":"Rank","type":"numeric","show":true,"sortNALast":true,"minWidth":50,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":0},"aggregated":{"digits":0}},"style":{"fontWeight":"bold"}},{"id":"Summary_With","name":"Value","type":"numeric","show":true,"sortNALast":true,"minWidth":55,"align":"center","className":"","format":{"cell":{"digits":2},"aggregated":{"digits":2}},"cell":"function(cellInfo) { return summaryDisplay(cellInfo) }","html":true,"style":"function(rowInfo, column, state) { return columnStyle(rowInfo, column, state) }"},{"id":"Summary_With_Rank","name":"Rank","type":"numeric","show":true,"sortNALast":true,"minWidth":50,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":0},"aggregated":{"digits":0}},"style":{"fontWeight":"bold"}},{"id":"TotalPoints","name":"Points","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"ShotsAtGoal","name":"Shots","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"Inside50s_Diff","name":"Inside 50s +/-","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"PointsFromTurnover","name":"Points from Turnover","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"ForwardHalf","name":"Forward Half","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"ChainToScore","name":"Chain to Score","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"D50ToF50","name":"D50 to F50","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"RetentionRating_Diff","name":"Kick Rating +/-","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"TotalPoints_Std","name":"TotalPoints_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ShotsAtGoal_Std","name":"ShotsAtGoal_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"Inside50s_Diff_Std","name":"Inside50s_Diff_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PointsFromTurnover_Std","name":"PointsFromTurnover_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ForwardHalf_Std","name":"ForwardHalf_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ChainToScore_Std","name":"ChainToScore_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"D50ToF50_Std","name":"D50ToF50_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"RetentionRating_Diff_Std","name":"RetentionRating_Diff_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"TotalPoints_Rank","name":"TotalPoints_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ShotsAtGoal_Rank","name":"ShotsAtGoal_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"Inside50s_Diff_Rank","name":"Inside50s_Diff_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PointsFromTurnover_Rank","name":"PointsFromTurnover_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ForwardHalf_Rank","name":"ForwardHalf_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ChainToScore_Rank","name":"ChainToScore_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"D50ToF50_Rank","name":"D50ToF50_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"RetentionRating_Diff_Rank","name":"RetentionRating_Diff_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"Summary_Without","name":"Value","type":"numeric","show":true,"sortNALast":true,"minWidth":55,"align":"center","className":"","format":{"cell":{"digits":2},"aggregated":{"digits":2}},"cell":"function(cellInfo) { return summaryDisplay(cellInfo) }","html":true,"style":"function(rowInfo, column, state) { return columnStyle(rowInfo, column, state) }"},{"id":"Summary_Without_Rank","name":"Rank","type":"numeric","show":true,"sortNALast":true,"minWidth":50,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":0},"aggregated":{"digits":0}},"style":{"fontWeight":"bold"}},{"id":"TotalPoints_Opposition","name":"Oppos. Points","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"ShotsAtGoal_Opposition","name":"Oppos. Shots","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"MarksOnLead_Opposition","name":"Oppos. Marks on Lead","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"PointsFromTurnover_Opposition","name":"Oppos. Pts from Turnover","type":"numeric","show":true,"sortNALast":true,"minWidth":70,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"PostClearanceContestedPossessions_Diff","name":"Post Clr. CP +/-","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":true,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"PointsFromForwardHalf_Opposition","name":"Oppos. Fwd Half Pts","type":"numeric","show":true,"sortNALast":true,"minWidth":70,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"ChainToScore_Opposition","name":"Oppos. Chain to Score","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"D50ToF50_Opposition","name":"Oppos. D50 to F50","type":"numeric","show":true,"sortNALast":true,"minWidth":80,"align":"center","className":"columnClass","defaultSortDesc":false,"format":{"cell":{"digits":1},"aggregated":{"digits":1}},"cell":"function(cellInfo) { return columnDisplay(cellInfo) }","html":true},{"id":"TotalPoints_Opposition_Std","name":"TotalPoints_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ShotsAtGoal_Opposition_Std","name":"ShotsAtGoal_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"MarksOnLead_Opposition_Std","name":"MarksOnLead_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PointsFromTurnover_Opposition_Std","name":"PointsFromTurnover_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PostClearanceContestedPossessions_Diff_Std","name":"PostClearanceContestedPossessions_Diff_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PointsFromForwardHalf_Opposition_Std","name":"PointsFromForwardHalf_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ChainToScore_Opposition_Std","name":"ChainToScore_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"D50ToF50_Opposition_Std","name":"D50ToF50_Opposition_Std","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"TotalPoints_Opposition_Rank","name":"TotalPoints_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ShotsAtGoal_Opposition_Rank","name":"ShotsAtGoal_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"MarksOnLead_Opposition_Rank","name":"MarksOnLead_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PointsFromTurnover_Opposition_Rank","name":"PointsFromTurnover_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PostClearanceContestedPossessions_Diff_Rank","name":"PostClearanceContestedPossessions_Diff_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"PointsFromForwardHalf_Opposition_Rank","name":"PointsFromForwardHalf_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"ChainToScore_Opposition_Rank","name":"ChainToScore_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"},{"id":"D50ToF50_Opposition_Rank","name":"D50ToF50_Opposition_Rank","type":"numeric","show":false,"sortNALast":true,"minWidth":60,"align":"center","className":"columnClass"}],"columnGroups":[{"name":"Summary","columns":["Summary_Rank","Summary"]},{"name":"With the footy","columns":["Summary_With_Rank","Summary_With","TotalPoints","ShotsAtGoal","Inside50s_Diff","PointsFromTurnover","ForwardHalf","ChainToScore","D50ToF50","RetentionRating_Diff"]},{"name":"Without the footy","columns":["Summary_Without_Rank","Summary_Without","TotalPoints_Opposition","ShotsAtGoal_Opposition","MarksOnLead_Opposition","PointsFromTurnover_Opposition","PostClearanceContestedPossessions_Diff","PointsFromForwardHalf_Opposition","ChainToScore_Opposition","D50ToF50_Opposition"]}],"defaultSortDesc":true,"defaultSorted":[{"id":"Summary","desc":true}],"defaultPageSize":20,"showPageSizeOptions":true,"pageSizeOptions":[10,15,20,50,100],"striped":true,"showSortIcon":false,"className":"afl-table table-condensed","theme":{"borderColor":"#dfe2e5","highlightColor":"#f0f5f9","cellPadding":"4px 5px","searchInputStyle":{"width":"100%"}},"language":{"filterPlaceholder":"search","noData":"No entries found","pageNext":"❯","pagePrevious":"❮","pageInfo":"{rowStart}–{rowEnd} of {rows} entries","pageNextLabel":"Next page","pagePreviousLabel":"Previous page"},"elementId":"premiership-metrics-table","dataKey":"a0d2720ee9b84a1a7e1e8eed44afb48b"},"children":[]},"class":"reactR_markup"},"evals":["tag.attribs.columns.0.className","tag.attribs.columns.1.cell","tag.attribs.columns.2.className","tag.attribs.columns.3.className","tag.attribs.columns.3.cell","tag.attribs.columns.5.className","tag.attribs.columns.6.className","tag.attribs.columns.7.cell","tag.attribs.columns.7.style","tag.attribs.columns.8.className","tag.attribs.columns.9.cell","tag.attribs.columns.9.style","tag.attribs.columns.10.className","tag.attribs.columns.11.className","tag.attribs.columns.11.cell","tag.attribs.columns.12.className","tag.attribs.columns.12.cell","tag.attribs.columns.13.className","tag.attribs.columns.13.cell","tag.attribs.columns.14.className","tag.attribs.columns.14.cell","tag.attribs.columns.15.className","tag.attribs.columns.15.cell","tag.attribs.columns.16.className","tag.attribs.columns.16.cell","tag.attribs.columns.17.className","tag.attribs.columns.17.cell","tag.attribs.columns.18.className","tag.attribs.columns.18.cell","tag.attribs.columns.19.className","tag.attribs.columns.20.className","tag.attribs.columns.21.className","tag.attribs.columns.22.className","tag.attribs.columns.23.className","tag.attribs.columns.24.className","tag.attribs.columns.25.className","tag.attribs.columns.26.className","tag.attribs.columns.27.className","tag.attribs.columns.28.className","tag.attribs.columns.29.className","tag.attribs.columns.30.className","tag.attribs.columns.31.className","tag.attribs.columns.32.className","tag.attribs.columns.33.className","tag.attribs.columns.34.className","tag.attribs.columns.35.cell","tag.attribs.columns.35.style","tag.attribs.columns.36.className","tag.attribs.columns.37.className","tag.attribs.columns.37.cell","tag.attribs.columns.38.className","tag.attribs.columns.38.cell","tag.attribs.columns.39.className","tag.attribs.columns.39.cell","tag.attribs.columns.40.className","tag.attribs.columns.40.cell","tag.attribs.columns.41.className","tag.attribs.columns.41.cell","tag.attribs.columns.42.className","tag.attribs.columns.42.cell","tag.attribs.columns.43.className","tag.attribs.columns.43.cell","tag.attribs.columns.44.className","tag.attribs.columns.44.cell","tag.attribs.columns.45.className","tag.attribs.columns.46.className","tag.attribs.columns.47.className","tag.attribs.columns.48.className","tag.attribs.columns.49.className","tag.attribs.columns.50.className","tag.attribs.columns.51.className","tag.attribs.columns.52.className","tag.attribs.columns.53.className","tag.attribs.columns.54.className","tag.attribs.columns.55.className","tag.attribs.columns.56.className","tag.attribs.columns.57.className","tag.attribs.columns.58.className","tag.attribs.columns.59.className","tag.attribs.columns.60.className"],"jsHooks":[]}</script>
</div>
<div id="overlay" class="overlay overlay-fullscreen">
<div class="overlay-content overlay-fullscreen-content">
<div class="d-flex justify-content-between">
<h3>
Premiership Window
</h3>
<button id="close-search-button" type="button" class="btn-close" aria-label="Close">
</button>
</div>
<div class="container-fluid">
<div class="row">
<div class="chart-container"
style="position: relative; margin:auto; height:45vw; width:100%; max-height:600px">
<canvas id="window-chart">
</canvas>
</div>
</div>
<p class="py-3">
Chart built using
<a href="https://www.chartjs.org" target="_blank">chartjs.org</a>
<p>
</div>
</div>
</div>
<script src="./src/js/afl-premiership-metrics.js"></script>
<script>
const ctx = document.getElementById('window-chart');
const chartData = [];
const pointStyles = [];

const datasets = [];

const data = { Current: [], Premiers: [], Other: [] };
const labels = { Current: [], Premiers: [], Other: [] };

let x;
let y;
let overall;
let label;

let window_x = 99;
let window_y = 99;

let range_x = [0, 0];
let range_y = [0, 0];

premiership_metrics.Team.forEach((element, index) => {
    x = parseFloat(premiership_metrics.Summary_Without[index]);
    y = parseFloat(premiership_metrics.Summary_With[index]);
    overall = parseFloat(premiership_metrics.Summary[index]);

    label = [
        `${element}, ${premiership_metrics.Season[index]}`,
        "",
        `Overall: ${overall >= 0 ? "+" : ""}${overall.toFixed(2)}`,
        `Without the footy: ${x >= 0 ? "+" : ""}${x.toFixed(2)}`,
        `With the footy: ${y >= 0 ? "+" : ""}${y.toFixed(2)}`
    ]

    if (premiership_metrics.IsCurrent[index] == 1) {
        data.Current.push({ x: x, y: y });
        labels.Current.push(label);

        const img = new Image();
        img.src = premiership_metrics.Image[index];
        if (window.innerWidth < 800) {
            img.height = "15";
            img.width = "15";
        } else {
            img.height = "20";
            img.width = "20";
        }
        pointStyles.push(img);
    }

    if (premiership_metrics.IsPremier[index] == 1) {
        data.Premiers.push({ x: x, y: y });
        labels.Premiers.push(label);
    } else {
        data.Other.push({ x: x, y: y });
        labels.Other.push(label);
    }

    if (premiership_metrics.IsPremier[index] == 1) {
        if (x < window_x) window_x = x;
        if (y < window_y) window_y = y;
    }
    if (x < range_x[0]) range_x[0] = x;
    if (x > range_x[1]) range_x[1] = x;
    if (y < range_y[0]) range_y[0] = y;
    if (y > range_y[1]) range_y[1] = y;
});

const datasetCurrent = {
    label: "Current",
    data: data.Current,
    pointStyle: pointStyles,
    order: 1,
    pointRadius: 20,
    borderColor: '#670099',
    backgroundColor: '#d79ff5'
}

const datasetPremiers = {
    label: "Premiers",
    data: data.Premiers,
    pointRadius: 4,
    order: 2,
    borderColor: '#ff8300',
    backgroundColor: '#ffce99'
}

const datasetOther = {
    label: "Non-Premiers",
    data: data.Other,
    pointRadius: 3,
    order: 3,
    borderColor: 'rgba(179, 179, 179, 0.5)',
    backgroundColor: 'rgba(230, 230, 230, 0.5)'
}

datasets.push(datasetCurrent);
datasets.push(datasetPremiers);
datasets.push(datasetOther);

const chart = new Chart(ctx, {
    type: 'scatter',
    data: {
        datasets: datasets
    },
    options: {
        scales: {
            x: {
                title: {
                    display: true,
                    text: "Without the Footy",
                    font: {
                        size: 14,
                        weight: "bold"
                    }
                },
                grid: {
                    color: function (context) {
                        if (context.tick.value == 0) {
                            return "#878787"
                        } else {
                            return "#e8e8e8"
                        }
                    }
                },
                min: -Math.ceil(Math.abs(range_x[0]) / 0.5 * 1.01) * 0.5,
                max: Math.ceil(Math.abs(range_x[1]) / 0.5 * 1.01) * 0.5
            },
            y: {
                title: {
                    display: true,
                    text: "With the Footy",
                    font: {
                        size: 14,
                        weight: "bold"
                    }
                },
                grid: {
                    color: function (context) {
                        if (context.tick.value == 0) {
                            return "#878787"
                        } else {
                            return "#e8e8e8"
                        }
                    }
                },
                min: -Math.ceil(Math.abs(range_y[0]) / 0.5 * 1.01) * 0.5,
                max: Math.ceil(Math.abs(range_y[1]) / 0.5 * 1.01) * 0.5
            }
        },
        plugins: {
            legend: {
                display: true,
                labels: {
                    font: {
                        size: 12
                    }
                }
            },
            tooltip: {
                callbacks: {
                    label: function (context) {
                        if (context.datasetIndex == 0) {
                            let tooltip = labels.Current[context.dataIndex];
                            return tooltip;
                        } else if (context.datasetIndex == 1) {
                            let tooltip = labels.Premiers[context.dataIndex];
                            return tooltip;
                        } else {
                            let tooltip = labels.Other[context.dataIndex];
                            return tooltip;
                        }
                    }
                }
            },
            annotation: {
                annotations: {
                    premiershipWindow: {
                        type: 'box',
                        xMin: window_x - 0.05,
                        xMax: 99,
                        yMin: window_y - 0.05,
                        yMax: 99,
                        borderWidth: 0,
                        backgroundColor: 'rgba(215, 159, 245, 0.3)',
                        adjustScaleRange: false,
                        drawTime: 'beforeDraw'
                    }
                }
            }
        },
        animation: false
    }
});
</script>
</div>
</div>
</div>
</main>

<footer>
    <!-- <br> -->
    <!-- <div class="addthis_inline_share_toolbox"></div>
    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <!-- <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=wheels83"></script> -->
    <!-- &nbsp; -->
    <hr />
    <p style="text-align: center;"><a href="#top">Back to top</a></p>
    <p style="text-align: center;">&copy; Wheelo Ratings</p>
</footer>



</div>

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->



<script type="text/javascript">
// manage active state of menu based on current page
(function() {
  href = window.location.pathname;
  href = href.substr(href.lastIndexOf('/') + 1);
  if (href === "")
    href = "index.html";
  
  let li = null;
  
  // main menu
  let menuAnchor = document.getElementById("navbar").querySelector('[href="' + href + '"]');

  if (menuAnchor !== null) {
      li = menuAnchor.closest('li');
      li.classList.add('active');
      
      let parent = li.parentElement.closest('li')
      
      if (parent !== null)
        parent.classList.add('active');
  }
  
  // banner menu
  menuAnchor = document.getElementById("navbar-banner").querySelector('[href="' + href + '"]');

  if (menuAnchor !== null) {
    li = menuAnchor.closest('li');
    li.classList.add('active');
  }
})();
</script>
<!-- <script>
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
var currentScrollPos = window.pageYOffset;
  if (prevScrollpos > currentScrollPos) {
    document.getElementById("nav").style.top = "0";
  } else {
    document.getElementById("nav").style.top = "-60px";
  }
  prevScrollpos = currentScrollPos;
}
</script> -->
</body>
</html>
